<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>WPF ViewModelでLOB開発 Vol 01 - WPFプロパティ システム - uEN Laboratory</title>
  <meta name="author" content="uEN">

  <meta name="description" content="ViewModelで簡単にLOB開発できるようなソリューションを目指します。">
  <meta name="keywords" content="uENLaboratory">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://s-ueno.github.io/blog/2014/09/11/wpf-01">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="uEN Laboratory" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://s-ueno.github.io/blog/2014/09/11/wpf-01">
  <meta property="og:title" content="WPF ViewModelでLOB開発 Vol 01 - WPFプロパティ システム - uEN Laboratory">
  <meta property="og:description" content="ViewModelで簡単にLOB開発できるようなソリューションを目指します。">

  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">

<script language="JavaScript">
$(document).ready( function () {
   $("a[href^='http']:not([href*='" + location.hostname + "'])").attr('target', '_blank');
})
</script>

  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54883059-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">uEN Laboratory</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:s-ueno.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="uEN Laboratory" />
    <meta itemprop="description" content="不定期でC#関連の情報を展開します。" />
    <meta itemprop="url" content="http://s-ueno.github.io" />
    <article class="hentry" role="article" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
      
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-09-11T12:03:19+09:00"  data-updated="true" itemprop="datePublished dateCreated"><time class='entry-date' datetime='2014-09-11T12:03:19+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:03 pm</span></time></time>
        
           | <a href="#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://s-ueno.github.io">Comments</a>
        
      </p>
    
    
    <h1 class="entry-title" itemprop="name headline">
        WPF ViewModelでLOB開発 Vol 01 - WPFプロパティ システム
        
    </h1>
    
  </header>


<div class="entry-content clearfix" itemprop="articleBody description"><p>LOB開発といえば企業が利用する業務システムで、Windows FormとSQLを利用して、あっという間にデータベースと連係して動くアプリケーションを作成できる技術者は多いと思います。</p>

<p>そんなところに出てきたWPF(Windows Presentation Foundation)。<br/>
とても優れた技術ですが、これをどうLOB開発として利用するかは少し敷居があるのかと感じています。</p>

<p>『WPF ViewModelでLOB開発』シリーズでは、WPFの恩恵を十分に受けつつ、より簡単に開発するための情報を展開します。</p>

<!-- more -->


<h2>WPFテクノロジー</h2>

<p>技術詳細については<a href="http://msdn.microsoft.com/ja-jp">MSDN</a> か <a href="http://blogs.msdn.com/b/shozoa/">荒井省三さんのBlog</a> のWPF編を読むことをお勧めします。<br/>
ここではVisualStudioを利用しながら動かすことに視点を合わせたいと思います。</p>

<h2>ViewModel</h2>

<p>ビューモデルと呼び、この連載タイトルの一部にも登場しています。<br/>
<a href="http://ja.wikipedia.org/wiki/Model_View_ViewModel">Model-View-ViewModel</a> というデザイン パターンの中で、画面の状態を持つオブジェクトです。
Wikiを読むと難しく早くも挫折しそうですが、手を動かしながら確認したいと思います。</p>

<p>Visual Studioを起動して SimpleApp というWPFアプリケーションを作成
<img src="http://s-ueno.github.io/images/wpf-01-01.png" alt="wpf-01-01" />
<img src="http://s-ueno.github.io/images/wpf-01-02.png" alt="wpf-01-02" /></p>

<p>自動でxamlが二つ生成されています。</p>

<ul>
<li>App.xaml

<ul>
<li><a href="http://msdn.microsoft.com/ja-jp/library/system.windows.application.aspx">System.Windows.Application</a> クラスから派生し、WPFアプリを起動する役目を持ちます。
　</li>
</ul>
</li>
<li>MainWindowo.xaml

<ul>
<li>メイン画面で、Model-View-ViewModel でいうところの View になります。  今回は中央にSampleTextBoxという名前を付けたテキストボックスを配置しました。</li>
</ul>
</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> &lt;TextBox Name="SampleTextBox"/&gt;</span></code></pre></td></tr></table></div></figure>


<p>ここに MainWindow の状態を持つための ViewModel を追加します。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-03.png" alt="wpf-01-03" />
<img src="http://s-ueno.github.io/images/wpf-01-04.png" alt="wpf-01-04" /></p>

<p>Textという文字列型のプロパティを持ち、コンストラクタで初期化しています。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class MainWindowViewModel
</span><span class='line'>{
</span><span class='line'>    public MainWindowViewModel()
</span><span class='line'>    {
</span><span class='line'>        Text = "これはテスト文字列です。";
</span><span class='line'>    }
</span><span class='line'>    public string Text { get; set; }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>次に MainWindow という ビュー が ビューモデル を利用してデータを表示するための設定を行います。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-05.png" alt="wpf-01-05" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/// &lt;summary&gt;
</span><span class='line'>/// MainWindow.xaml の相互作用ロジック
</span><span class='line'>/// &lt;/summary&gt;
</span><span class='line'>public partial class MainWindow : Window
</span><span class='line'>{
</span><span class='line'>    public MainWindow()
</span><span class='line'>    {
</span><span class='line'>        InitializeComponent();
</span><span class='line'>
</span><span class='line'>        this.DataContext = new MainWindowViewModel();
</span><span class='line'>        
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>DataContext というプロパティ名が表すように、ここに設定したオブジェクトがデータを表すということになります。<br/>
これで ViewModel の設定は完了しました。</p>

<p>ここからさらに各コントロール（ここではテキストボックスだけですが）の データ バインディング を行います。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-06.png" alt="wpf-01-06" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>this.SampleTextBox.SetBinding(TextBox.TextProperty, new Binding("Text"));</span></code></pre></td></tr></table></div></figure>


<p>バインディングの方法は様々でXaml(ザムル)といわれる画面を構成するXML上で
<code>&lt;TextBox Name="SampleTextBox" Text="{Binding Path=Text}"/&gt;</code>
と記述することも可能ですが、ここでは意図してコード上でバインディングしています。</p>

<p>TextBox.TextProperty は依存関係プロパティといい、このバインディングの仕組みは<a href="http://msdn.microsoft.com/ja-jp/library/ms752914.aspx">WPF プロパティ システム</a>と呼ばれます。
Bindingクラスのコンストラクタ パラメーターは ViewModel のプロパティ名を設定しています。
この状態でF5キーを押下してデバック実行すると・・・</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-07.png" alt="wpf-01-07" /></p>

<p>表示されましたね！<br/>
フレキシブル レイアウトで、テキストボックスは画面を大きくすると画面と一緒に大きくなります。</p>

<p>画面での入力内容が、DataContext に設定したオブジェクトのプロパティに自動設定されるなどの一連のバインディングの仕組みが用意されており、
この仕組みを利用するのが<a href="http://ja.wikipedia.org/wiki/Model_View_ViewModel">Model-View-ViewModel</a> デザイン パターンです。</p>

<p>注目するのはMainWindowViewModelクラスで、UIから独立した素のクラスです。<br/>
従来の画面とモデルを紐付けるよなグル(接着剤)コードがViewModel上には出てこなくなりました。</p>

<h2>LOB開発基盤　-　ViewModel</h2>

<p>さて、ここまでで発生した「おまじないコード」は・・・</p>

<ul>
<li>WindowのDataContextプロパティへの設定</li>
<li>TextBox.TextPropertyという依存関係プロパティを利用したバインディング作業</li>
</ul>


<p>になります。<br/>
まだまだ記述していないおまじないコードもあり、このままではLOB開発に展開できません。</p>

<p>これらのおまじないコードを基底クラスと一連の機能に隠ぺいすることで、最終的にはViewModelで簡単に画面遷移できるようなソリューションになれれば、WPFの恩恵を受けながらLOB開発を進められるかも？！</p>

<p>基盤はこれからのシリーズで少しずつ機能を固めていくので、まずは準備しましょう。
まずは <a href="http://msdn.microsoft.com/ja-jp/library/system.componentmodel.inotifypropertychanged.aspx">INotifyPropertyChanged</a> インターフェイスを実装したViewModelのベースクラスを準備します。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-08.png" alt="wpf-01-08" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public abstract class BizViewModel : INotifyPropertyChanged
</span><span class='line'>{
</span><span class='line'>    public event PropertyChangedEventHandler PropertyChanged;
</span><span class='line'>    public void OnPropertyChanged(string propertyName = null)
</span><span class='line'>    {
</span><span class='line'>        if (PropertyChanged != null)
</span><span class='line'>            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
</span><span class='line'>    }
</span><span class='line'>    protected bool SetProperty&lt;T&gt;(ref T storage, T value, 
</span><span class='line'>        [CallerMemberName] string propertyName = null)
</span><span class='line'>    {
</span><span class='line'>        if (object.Equals(storage, value))
</span><span class='line'>            return false;
</span><span class='line'>
</span><span class='line'>        storage = value;
</span><span class='line'>        OnPropertyChanged(propertyName);
</span><span class='line'>        return true;
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ソースコードは<a href="http://blogs.msdn.com/b/shozoa/">荒井省三さんのBlog</a>で紹介されているものを拝借しました。
ポイントは二つで</p>

<ul>
<li><a href="http://msdn.microsoft.com/ja-jp/library/system.componentmodel.inotifypropertychanged.aspx">INotifyPropertyChanged</a> インターフェイス</li>
<li><a href="http://msdn.microsoft.com/ja-jp/library/system.runtime.compilerservices.callermembernameattribute.aspx">CallerMemberName</a> 属性</li>
</ul>


<p>になります。</p>

<p><a href="http://msdn.microsoft.com/ja-jp/library/system.componentmodel.inotifypropertychanged.aspx">INotifyPropertyChanged</a> インターフェイスは、データ バインディングの仕組みの一つで、何かの処理を実行してViewModelのプロパティに値をセットした場合、それをView側に通知する機能です。
この仕組みで、画面上のデータが再描画されます。<br/>
プロパティのsetで呼び出すようにします。</p>

<p><a href="http://msdn.microsoft.com/ja-jp/library/system.runtime.compilerservices.callermembernameattribute.aspx">CallerMemberName</a> 属性は.Net4.5で新しく出てきた機能で、呼び出し元のメンバー名を自動設定してくれる機能です。
少し前までは、プロパティのsetで <code>OnPropertyChanged("●×プロパティ名")</code> みたいにコーディングしていたのですが、その文字を記述する必要がなくなりました。
.Net4.0以前では利用できませんが、必須な属性ではなく、文字列でプロパティ名をコーディングしていた世界から少しだけタイプセーフになりましたというところです。</p>

<p>こういうおまじないコードをViewModelの基底クラスに準備しておくことにします。</p>

<p>次にバインディングの作業です。
先ほどタイプセーフと呼びましたが、なるべくコンパイラのチェックが働くようなコーディングだとソースコードの量が増えたときに便利です。
そこで、バインディングのときにコーディングした</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>new Binding("Text")</span></code></pre></td></tr></table></div></figure>


<p>ここの&#8221;Text&#8221;というプロパティ名もタイプセーフにセットできるようにしたいと思います。</p>

<p>これはWPFとは関係のない、ただの技術情報なのですが、<a href="http://msdn.microsoft.com/ja-jp/library/bb397687.aspx">ラムダ</a>というコーディングの記述方法があります。<br/>
LINQが利用されるようになってきて、このラムダにおける型の推論によるコーディング方法も浸透してきたと思います。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//LINQというのは、こんな感じ
</span><span class='line'>IEnumerable&lt;Customer&gt; customers = customers.Where(c =&gt; c.City == "London");
</span></code></pre></td></tr></table></div></figure>


<p>C#の経験があるといってもラムダを初めてみる人は、 <code>c =&gt; c.City == "London"</code> の記述を見るとびっくりするかもしれませんが、VisualStudioでインテリセンスが働くので、すぐに慣れると思います。</p>

<p>このラムダを利用して、タイプセーフにViewModelのプロパティ名を取得するような簡単なユーティリティを準備します。
こういうのはすでに世の中に出回っているので、<a href="http://themechanicalbride.blogspot.jp/2007/03/symbols-in-c-30-reloaded.html">探せば出てきます</a>。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public static class ExpressionExtensions
</span><span class='line'>{
</span><span class='line'>    public static string ToPropertyName&lt;T&gt;(this T obj, Expression&lt;Func&lt;T, object&gt;&gt; expr)
</span><span class='line'>    {
</span><span class='line'>        return expr.ToSymbol();
</span><span class='line'>    }
</span><span class='line'>    public static string ToSymbol(this Expression expr)
</span><span class='line'>    {
</span><span class='line'>        if (expr == null)
</span><span class='line'>            return null;
</span><span class='line'>
</span><span class='line'>        var memExp = (expr as LambdaExpression).Body as MemberExpression;
</span><span class='line'>        var list = new List&lt;string&gt;();
</span><span class='line'>        while (memExp is MemberExpression)
</span><span class='line'>        {
</span><span class='line'>            list.Add(memExp.Member.Name);
</span><span class='line'>            memExp = memExp.Expression as MemberExpression;
</span><span class='line'>        }
</span><span class='line'>        return string.Join(".", list.Reverse&lt;string&gt;());
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>あとは MainWindowViewModel のベースクラスを BizViewModel として</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>class MainWindowViewModel : BizViewModel
</span><span class='line'>{
</span><span class='line'>    public MainWindowViewModel()
</span><span class='line'>    {
</span><span class='line'>        Text = "これはテスト文字列です。";
</span><span class='line'>    }
</span><span class='line'>    public string Text
</span><span class='line'>    {
</span><span class='line'>        get { return text; }
</span><span class='line'>        set
</span><span class='line'>        {
</span><span class='line'>            SetProperty(ref text, value);
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>    private string text; 
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>さっきのユーティリティを利用すると</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-09.png" alt="wpf-01-09" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/// &lt;summary&gt;
</span><span class='line'>/// MainWindow.xaml の相互作用ロジック
</span><span class='line'>/// &lt;/summary&gt;
</span><span class='line'>public partial class MainWindow : Window
</span><span class='line'>{
</span><span class='line'>    public MainWindow()
</span><span class='line'>    {
</span><span class='line'>        InitializeComponent();
</span><span class='line'>
</span><span class='line'>        var viewModel = new MainWindowViewModel();
</span><span class='line'>        this.DataContext = viewModel;
</span><span class='line'>
</span><span class='line'>        var textPropertyName = viewModel.ToPropertyName(x =&gt; x.Text);
</span><span class='line'>        this.SampleTextBox.SetBinding(TextBox.TextProperty, new Binding(textPropertyName));
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>これでコンパイラでチェックがかかるタイプセーフなWPFの簡単な基盤ができました。
イベント系などは次回紹介するとして、今はViewおよびViewModelの役割を設定していきたいと思います。</p>

<h2>LOB開発基盤　-　View</h2>

<p>次にViewについて少し掘り下げていきます。
今はWindowのXamlに直接記述しています。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Window x:Class="SimpleApp.MainWindow"
</span><span class='line'>        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
</span><span class='line'>        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
</span><span class='line'>        Title="MainWindow" Height="350" Width="525"&gt;
</span><span class='line'>    &lt;Grid&gt;
</span><span class='line'>        &lt;TextBox Name="SampleTextBox"/&gt;
</span><span class='line'>    &lt;/Grid&gt;
</span><span class='line'>&lt;/Window&gt;</span></code></pre></td></tr></table></div></figure>


<p>Windowタグの中には一つのコンテンツのみを配置できます。<br/>
今は <code>&lt;Grid&gt;</code> が配置されています。コードで記述すると</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/// &lt;summary&gt;
</span><span class='line'>/// MainWindow.xaml の相互作用ロジック
</span><span class='line'>/// &lt;/summary&gt;
</span><span class='line'>public partial class MainWindow : Window
</span><span class='line'>{
</span><span class='line'>    public MainWindow()
</span><span class='line'>    {
</span><span class='line'>        InitializeComponent();
</span><span class='line'>
</span><span class='line'>        this.Content = new Grid();</span></code></pre></td></tr></table></div></figure>


<p>なので、コンテンツは一つのみとなります。
ただし、このコンテンツがどのように描画されるかはWPFの拡張機能によって変わってきます。</p>

<p>試しにデバック実行し、WPFビジュアライザーで確認してみると</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-10.png" alt="wpf-01-10" /></p>

<p>MainWindowの中にあるContentPresenterにGridが配置されています。<br/>
別の機会に詳しく紹介しますが、WPFの<a href="http://msdn.microsoft.com/ja-jp/library/ms745683.aspx">Style</a>が適用されている結果このような表示になります。</p>

<p>少し前までAero.NormalColor.xamlなどスタイルがMSDNからダウンロードできたのですが、リンクが見つかりませんでした。
現在のデバック実行した環境でWindowクラスに適用されているスタイルは、以下のようになっているのだと思います。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;Style x:Key="{x:Type Window}"
</span><span class='line'>       TargetType="{x:Type Window}"&gt;
</span><span class='line'>    &lt;Setter Property="Foreground"
</span><span class='line'>            Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/&gt;
</span><span class='line'>    &lt;Setter Property="Background"
</span><span class='line'>            Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/&gt;
</span><span class='line'>    &lt;Setter Property="Template"&gt;
</span><span class='line'>        &lt;Setter.Value&gt;
</span><span class='line'>            &lt;ControlTemplate TargetType="{x:Type Window}"&gt;
</span><span class='line'>                &lt;Border Background="{TemplateBinding Background}"
</span><span class='line'>                        BorderBrush="{TemplateBinding BorderBrush}"
</span><span class='line'>                        BorderThickness="{TemplateBinding BorderThickness}"&gt;
</span><span class='line'>                    &lt;AdornerDecorator&gt;
</span><span class='line'>                        &lt;ContentPresenter/&gt;
</span><span class='line'>                    &lt;/AdornerDecorator&gt;
</span><span class='line'>                &lt;/Border&gt;
</span><span class='line'>            &lt;/ControlTemplate&gt;
</span><span class='line'>        &lt;/Setter.Value&gt;
</span><span class='line'>    &lt;/Setter&gt;</span></code></pre></td></tr></table></div></figure>


<p>TemplateというWPFの外観をカスタマイズできる機能があり、ここにコンテンツを表示する際はBorderを用意して、AdornerDecoratorを用意してその中にContentPresenterを・・・という風に定義されています。</p>

<p>話を戻すと、Windowに表示されるコンテンツは<a href="http://msdn.microsoft.com/ja-jp/library/system.windows.controls.contentpresenter.aspx">ContentPresenter</a>を利用して表示されるようになっています。</p>

<p>MSDNの<a href="http://msdn.microsoft.com/ja-jp/library/system.windows.controls.contentpresenter.aspx">ContentPresenter</a>をみると、コンテンツがどのようなロジックで表示するかの記述があります。
たとえば、コンテンツに文字列を設定するとTextBlockが自動で作成されて、表示されるようになります。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-11.png" alt="wpf-01-11" /></p>

<p><img src="http://s-ueno.github.io/images/wpf-01-12.png" alt="wpf-01-12" /></p>

<p>F5キーでデバック実行</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-13.png" alt="wpf-01-13" /></p>

<p>任意のクラスの場合はToStringの結果が表示されるのですが、その場合に何を表示すべきかをカスタマイズする機能があります。</p>

<ul>
<li><a href="http://msdn.microsoft.com/ja-jp/library/system.windows.controls.contentcontrol.contenttemplateselector.aspx">ContentControl.ContentTemplateSelector</a> プロパティ</li>
</ul>


<p>試しにContentTemplateSelectorプロパティに設定して動作確認してみましょう。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-14.png" alt="wpf-01-14" /></p>

<p>戻り値の<a href="http://msdn.microsoft.com/ja-jp/library/system.windows.datatemplate.aspx">DataTemplate</a>はビジュアル要素（つまりView）をあらわし、引数のitemは任意のデータをあらわします。<br/>
この仕組みの面白いところは、<strong>データがビジュアル要素を決定する</strong>というところです。
つまり、ビジュアル要素はデータの属性として表現すると、仕組みを上手に利用できそうだとわかります。</p>

<p>さっそくオブジェクトとしてそれを表現してみたいと思います。<br/>
ビジュアル要素はデータの属性として扱うので</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public class VisualElementsAttribute : Attribute
</span><span class='line'>{
</span><span class='line'>    public VisualElementsAttribute(Type visualType)
</span><span class='line'>    {
</span><span class='line'>        VisualType = visualType;
</span><span class='line'>    }
</span><span class='line'>    public Type VisualType { get; private set; }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>この属性はデータ（BizViewModelから派生した任意のViewModel）に付与することになります。<br/>
次にビジュアル要素（ビュー）用の基底クラスを用意します。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public abstract class BizView : UserControl
</span><span class='line'>{
</span><span class='line'>    protected BizView()
</span><span class='line'>    {
</span><span class='line'>        DataContextChanged += OnBizViewDataContextChanged;
</span><span class='line'>    }
</span><span class='line'>    private void OnBizViewDataContextChanged(object sender, System.Windows.DependencyPropertyChangedEventArgs e)
</span><span class='line'>    {
</span><span class='line'>        BuildBinding();
</span><span class='line'>    }
</span><span class='line'>    protected virtual void BuildBinding()
</span><span class='line'>    {
</span><span class='line'>
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>上記二つを利用して、BizViewModelに肉付けします。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public abstract class BizViewModel : INotifyPropertyChanged
</span><span class='line'>{
</span><span class='line'>    protected BizViewModel()
</span><span class='line'>    {
</span><span class='line'>        if (VisualElements != null)
</span><span class='line'>        {
</span><span class='line'>            View = Activator.CreateInstance(VisualElements.VisualType) as BizView;
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>    private VisualElementsAttribute visualElements;
</span><span class='line'>    public VisualElementsAttribute VisualElements
</span><span class='line'>    {
</span><span class='line'>        get
</span><span class='line'>        {
</span><span class='line'>            if (visualElements == null)
</span><span class='line'>            {
</span><span class='line'>                visualElements = this.GetType()
</span><span class='line'>                                     .GetCustomAttributes(typeof(VisualElementsAttribute), false)
</span><span class='line'>                                     .FirstOrDefault() as VisualElementsAttribute;
</span><span class='line'>            }
</span><span class='line'>            return visualElements;
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>    private BizView view;
</span><span class='line'>    public BizView View
</span><span class='line'>    {
</span><span class='line'>        get { return view; }
</span><span class='line'>        set
</span><span class='line'>        {
</span><span class='line'>            view = value;
</span><span class='line'>            view.DataContext = this;
</span><span class='line'>        }
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    public event PropertyChangedEventHandler PropertyChanged;
</span><span class='line'>    public void OnPropertyChanged(string propertyName = null)
</span><span class='line'>    {
</span><span class='line'>        if (PropertyChanged != null)
</span><span class='line'>            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
</span><span class='line'>    }
</span><span class='line'>    protected bool SetProperty&lt;T&gt;(ref T storage, T value,
</span><span class='line'>        [CallerMemberName] string propertyName = null)
</span><span class='line'>    {
</span><span class='line'>        if (object.Equals(storage, value))
</span><span class='line'>            return false;
</span><span class='line'>
</span><span class='line'>        storage = value;
</span><span class='line'>        OnPropertyChanged(propertyName);
</span><span class='line'>        return true;
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>先ほどDataTemplateSelectorを派生した動作確認用のサンプルを作成しましたが、正しくビジュアル要素を返すDataTemplateSelectorを作成します。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>public class ViewDataTemplateSelector : DataTemplateSelector
</span><span class='line'>{
</span><span class='line'>    public override DataTemplate SelectTemplate(object item, DependencyObject container)
</span><span class='line'>    {
</span><span class='line'>        var vm = item as BizViewModel;
</span><span class='line'>        if (vm == null || vm.VisualElements == null)
</span><span class='line'>            return base.SelectTemplate(item, container);
</span><span class='line'>
</span><span class='line'>        var template = new DataTemplate() { VisualTree = new FrameworkElementFactory(vm.VisualElements.VisualType) };
</span><span class='line'>        template.Seal();
</span><span class='line'>        return template;
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>ここまででのLOB開発用の基盤は以下のようになっています。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-15.png" alt="wpf-01-15" /></p>

<p>これを早速使って画面を表示したいと思います。</p>

<h2>LOB開発基盤　-　はじめの一歩</h2>

<p>コンテンツもViewModelも何もない空のMainWindowのみの状態です。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-16.png" alt="wpf-01-16" /></p>

<p>ここにViewを追加します。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-17.png" alt="wpf-01-17" /></p>

<p>名前はMainViewで、WPFのユーザーコントロールで追加します。<br/>
VisualStudioにはItemTemplatesフォルダがあって、これを利用すると便利なのですが、それは次回に紹介します。</p>

<p>MainViewクラスのベースクラスをBizViewに変更します。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-18.png" alt="wpf-01-18" /></p>

<p>この作業に今は手間がかかりますが、ItemTemplateを紹介するまでの我慢です。</p>

<p>MainView.xamlに先ほど作成した基盤の名前空間をインポート<code>xmlns:uen="clr-namespace:uEN.UI;assembly=uEN"</code>して、メインのタグを<code>&lt;uen:BizView</code>に変更します。<br/>
合わせてMainView.xaml.csのベースクラスも<code>BizView</code>に変更します。</p>

<p>このViewに先ほどと同じようにテキストボックスを配置します。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-19.png" alt="wpf-01-19" /></p>

<p>次にMainViewModelを追加します。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-20.png" alt="wpf-01-20" /></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[VisualElements(typeof(MainView))]
</span><span class='line'>public class MainViewModel : BizViewModel
</span><span class='line'>{
</span><span class='line'>    public MainViewModel()
</span><span class='line'>    {
</span><span class='line'>        MyProperty = "ViewModelでLob開発";
</span><span class='line'>    }
</span><span class='line'>    public string MyProperty { get; set; }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>このViewModelをMainViewのBuildBindingでデータバインディングします。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/// &lt;summary&gt;
</span><span class='line'>/// MainView.xaml の相互作用ロジック
</span><span class='line'>/// &lt;/summary&gt;
</span><span class='line'>public partial class MainView : BizView
</span><span class='line'>{
</span><span class='line'>    public MainView()
</span><span class='line'>    {
</span><span class='line'>        InitializeComponent();
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    protected override void BuildBinding()
</span><span class='line'>    {
</span><span class='line'>        var viewModel = this.DataContext as MainViewModel;
</span><span class='line'>        var propertyName = viewModel.ToPropertyName(x =&gt; x.MyProperty);
</span><span class='line'>        this.SampleTextBox.SetBinding(TextBox.TextProperty, new Binding(propertyName));
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>今は空のMainWindowとMainView/MainViewModelがある状態です。</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-21.png" alt="wpf-01-21" /></p>

<p>最後にMainWindowにコンテンツとセレクターを設定します。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/// &lt;summary&gt;
</span><span class='line'>/// MainWindow.xaml の相互作用ロジック
</span><span class='line'>/// &lt;/summary&gt;
</span><span class='line'>public partial class MainWindow : Window
</span><span class='line'>{
</span><span class='line'>    public MainWindow()
</span><span class='line'>    {
</span><span class='line'>        InitializeComponent();
</span><span class='line'>        this.Content = new MainViewModel();
</span><span class='line'>        this.ContentTemplateSelector = new ViewDataTemplateSelector();
</span><span class='line'>    }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>以上で準備が完了です。<br/>
デバック実行すると・・・</p>

<p><img src="http://s-ueno.github.io/images/wpf-01-22.png" alt="wpf-01-22" /></p>

<p>期待した結果が表示されました！</p>

<p>WPFの「おまじないコード」などを基盤に入れていくと、それを利用するLOB開発は楽になると思います。<br/>
たとえば</p>

<ul>
<li>BizViewModelにShowメソッドを用意し、WindowをNewするコードを入れれば・・・</li>
<li>コマンドのバインディングのラッパーを・・・</li>
<li>ロギングが・・・</li>
</ul>


<p>思いつくままをオレオレ実装してもいいですし、<a href="http://www.microsoft.com/ja-jp/dev/2010/solutions/architecture/default.aspx">Application Architecture Guide</a>などを読み解いて、しかるべき処理を準備していくのも一つかもしれません。</p>

<p>次回は今までの作業で手間だったものの自動化を考えてItemTemplatesの紹介と、もう少し踏み込んでボタンを押して動くところまでもっていければと思います。</p>

<p>今回のサンプルは<a href="http://s-ueno.github.io/images/uEN-Vol01.zip">コチラ</a></p>

<hr />
</div>


      <footer>
        <p class="meta text-muted">
          
  

<span class="glyphicon glyphicon-user"></span> <span class="byline author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">Posted by <span class="fn" itemprop="name">uEN</span></span>

          












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-09-11T12:03:19+09:00"  data-updated="true" itemprop="datePublished dateCreated"><time class='entry-date' datetime='2014-09-11T12:03:19+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>12:03 pm</span></time></time>
          

<span class="glyphicon glyphicon-tags"></span>&nbsp;
<span class="categories">
  
    <a class='category' href='/blog/categories/wpf/'>wpf</a>
  
</span>


        </p>
        
          <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://s-ueno.github.io/blog/2014/09/11/wpf-01/" data-via="" data-counturl="http://s-ueno.github.io/blog/2014/09/11/wpf-01/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

        
        
          <ul class="meta text-muted pager">
            
            
            <li class="next"><a href="/blog/2014/10/01/wpf-02/" title="Next Post: WPF ViewModelでLOB開発 Vol 02 - ルーティング イベント">WPF ViewModelでLOB開発 Vol 02 - ルーティング イベント &raquo;</a></li>
            
          </ul>
        
      </footer>
    </article>
    
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  
  <aside class="sidebar col-md-3">
    
      



<section>
  <p>
	不定期でC#関連の情報を展開します。
  
      <a href="https://github.com/s-ueno/uENLab">@s-ueno/uENLab</a> on GitHub
  
  </p>
</section>
<section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2014/11/27/wpf-12/">Jekyll の Paginate が仕事しない</a>
    
    <a class="list-group-item " href="/blog/2014/11/25/wpf-11/">MEF で優先度を設けて取得できないか</a>
    
    <a class="list-group-item " href="/blog/2014/11/20/wpf-10/">ダイアログ メッセージのデザイン - WPF Vol 09</a>
    
    <a class="list-group-item " href="/blog/2014/11/20/wpf-09/">カスタムコントロールとおまけでIsolatedStorage - WPF Vol 08</a>
    
    <a class="list-group-item " href="/blog/2014/11/17/wpf-08/">ユーザーコントロールに学ぶ様々なコンテンツ - WPF Vol 07</a>
    
  </div>
</section>
<section>
  <h3>Category</h3>
    <ul id="category-list"><li><a href='/blog/categories/jekyll-paginate/'>jekyll-paginate (1)</a></li><li><a href='/blog/categories/mef/'>mef (1)</a></li><li><a href='/blog/categories/wpf/'>wpf (9)</a></li><li><a href='/blog/categories/dezain/'>デザイン (1)</a></li></ul>
</section>
<section>
  <h3>Tags</h3>
    <span id="tag-cloud"><a href='/blog/tags/binding' style='font-size: 113.33333333333333%'>Binding</a> <a href='/blog/tags/itemtemplate' style='font-size: 106.66666666666667%'>ItemTemplate</a> <a href='/blog/tags/jekyll-paginate' style='font-size: 106.66666666666667%'>jekyll-paginate</a> <a href='/blog/tags/lobkai-fa' style='font-size: 106.66666666666667%'>LOB開発</a> <a href='/blog/tags/mef' style='font-size: 106.66666666666667%'>MEF</a> <a href='/blog/tags/mvvm' style='font-size: 106.66666666666667%'>MVVM</a> <a href='/blog/tags/routedevent' style='font-size: 106.66666666666667%'>RoutedEvent</a> <a href='/blog/tags/style' style='font-size: 113.33333333333333%'>Style</a> <a href='/blog/tags/template' style='font-size: 113.33333333333333%'>Template</a> <a href='/blog/tags/usercontrol' style='font-size: 106.66666666666667%'>UserControl</a> <a href='/blog/tags/wpf' style='font-size: 160.0%'>WPF</a> <a href='/blog/tags/dezain' style='font-size: 106.66666666666667%'>デザイン</a> </span>
</section>

    
  </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - uEN<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'uenlaboratory';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://s-ueno.github.io/blog/2014/09/11/wpf-01/';
        var disqus_url = 'http://s-ueno.github.io/blog/2014/09/11/wpf-01/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>


  </body>
</html>
